YUI.add("hermes-template-photo-list-photo-interaction",function(n,l){var t=n.Template.Handlebars.revive({1:function(n,l,t,e,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression(n.lambda(null!=(a=null!=l?r(l,"photo"):l)?r(a,"title"):a,l))},3:function(n,l,t,e,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((a(t,"intlMessage")||l&&a(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.UNTITLED"},data:o,loc:{start:{line:3,column:141},end:{line:3,column:183}}}))},5:function(n,l,t,e,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return" "+n.escapeExpression((a(t,"intlMessage")||l&&a(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.BY_YOU"},data:o,loc:{start:{line:3,column:212},end:{line:3,column:252}}}))},7:function(n,l,t,e,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return" "+n.escapeExpression((r(t,"intlMessage")||l&&r(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{user:null!=(a=null!=(a=null!=l?r(l,"photo"):l)?r(a,"owner"):a)?r(a,"username"):a,intlName:"common.BY_USER"},data:o,loc:{start:{line:3,column:261},end:{line:3,column:328}}}))},9:function(n,l,t,e,o){var a,r=null!=l?l:n.nullContext||{},i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t<div class="extra-tools">\n'+(null!=(a=i(t,"if").call(r,null!=l?i(l,"removeToolClass"):l,{name:"if",hash:{},fn:n.program(10,o,0),inverse:n.noop,data:o,loc:{start:{line:6,column:3},end:{line:8,column:10}}}))?a:"")+(null!=(a=i(t,"if").call(r,null!=l?i(l,"bigScotchTitle"):l,{name:"if",hash:{},fn:n.program(12,o,0),inverse:n.noop,data:o,loc:{start:{line:9,column:3},end:{line:11,column:10}}}))?a:"")+(null!=(a=i(t,"if").call(r,null!=l?i(l,"moreMenuItems"):l,{name:"if",hash:{},fn:n.program(14,o,0),inverse:n.noop,data:o,loc:{start:{line:12,column:3},end:{line:14,column:10}}}))?a:"")+"\t\t</div>\n"},10:function(n,l,t,e,o){var a,r,i=n.escapeExpression,s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<div class="extra-tool remove-photo '+i("function"==typeof(r=null!=(r=s(t,"removeToolClass")||(null!=l?s(l,"removeToolClass"):l))?r:n.hooks.helperMissing)?r.call(null!=l?l:n.nullContext||{},{name:"removeToolClass",hash:{},data:o,loc:{start:{line:7,column:40},end:{line:7,column:59}}}):r)+'" data-id='+i(n.lambda(null!=(a=null!=l?s(l,"photo"):l)?s(a,"id"):a,l))+"></div>\n"},12:function(n,l,t,e,o){var a,r,i=n.escapeExpression,s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<div class="extra-tool big-scotch" data-id='+i(n.lambda(null!=(a=null!=l?s(l,"photo"):l)?s(a,"id"):a,l))+' title="'+i("function"==typeof(r=null!=(r=s(t,"bigScotchTitle")||(null!=l?s(l,"bigScotchTitle"):l))?r:n.hooks.helperMissing)?r.call(null!=l?l:n.nullContext||{},{name:"bigScotchTitle",hash:{},data:o,loc:{start:{line:10,column:67},end:{line:10,column:85}}}):r)+'"></div>\n'},14:function(n,l,t,e,o){var a,r,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,u=n.escapeExpression,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<div class="extra-tool more-menu" data-menu-items="'+u("function"==typeof(r=null!=(r=c(t,"moreMenuItems")||(null!=l?c(l,"moreMenuItems"):l))?r:s)?r.call(i,{name:"moreMenuItems",hash:{},data:o,loc:{start:{line:13,column:55},end:{line:13,column:72}}}):r)+'" data-id='+u(n.lambda(null!=(a=null!=l?c(l,"photo"):l)?c(a,"id"):a,l))+' title="'+u((c(t,"intlMessage")||l&&c(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.MORE"},data:o,loc:{start:{line:13,column:102},end:{line:13,column:140}}}))+'"></div>\n'},16:function(n,l,t,e,o){var a,r,i=n.escapeExpression,s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<a href="'+i("function"==typeof(r=null!=(r=s(t,"photoPageUrl")||(null!=l?s(l,"photoPageUrl"):l))?r:n.hooks.helperMissing)?r.call(null!=l?l:n.nullContext||{},{name:"photoPageUrl",hash:{},data:o,loc:{start:{line:20,column:13},end:{line:20,column:29}}}):r)+'" class="title" tabindex="-1">'+i(n.lambda(null!=(a=null!=l?s(l,"photo"):l)?s(a,"title"):a,l))+"</a>\n"},18:function(n,l,t,e,o){return'\t\t\t\t<span class="title empty"> </span>\n'},20:function(n,l,t,e,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<a href="'+n.escapeExpression(n.lambda(null!=(a=null!=(a=null!=l?r(l,"photo"):l)?r(a,"owner"):a)?r(a,"url"):a,l))+'" class="attribution">\n'+(null!=(a=(r(t,"photoAttribution")||l&&r(l,"photoAttribution")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?r(l,"photo"):l,null!=l?r(l,"flippers"):l,{name:"photoAttribution",hash:{},fn:n.program(21,o,0),inverse:n.noop,data:o,loc:{start:{line:26,column:5},end:{line:32,column:26}}}))?a:"")+"\t\t\t\t</a>\n"},21:function(n,l,t,e,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(a=r(t,"if").call(null!=l?l:n.nullContext||{},null!=l?r(l,"intlName"):l,{name:"if",hash:{},fn:n.program(22,o,0),inverse:n.program(24,o,0),data:o,loc:{start:{line:27,column:6},end:{line:31,column:13}}}))?a:""},22:function(n,l,t,e,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t\t\t\t"+n.escapeExpression((a(t,"intlMessage")||l&&a(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{user:null!=l?a(l,"user"):l,intlName:null!=l?a(l,"intlName"):l},data:o,loc:{start:{line:28,column:7},end:{line:28,column:50}}}))+"\n"},24:function(n,l,t,e,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t\t\t\t"+n.escapeExpression("function"==typeof(a=null!=(a=r(t,"user")||(null!=l?r(l,"user"):l))?a:n.hooks.helperMissing)?a.call(null!=l?l:n.nullContext||{},{name:"user",hash:{},data:o,loc:{start:{line:30,column:7},end:{line:30,column:15}}}):a)+"\n"},26:function(n,l,t,e,o){return'\t\t\t\t<span class="attribution empty"> </span>\n'},28:function(n,l,t,e,o){return" faved"},30:function(n,l,t,e,o){return" can-not-fave"},32:function(n,l,t,e,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t\taria-label="'+n.escapeExpression((a(t,"intlMessage")||l&&a(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"fave-view.UNFAVE_PHOTO"},data:o,loc:{start:{line:43,column:17},end:{line:43,column:66}}}))+'"\n'},34:function(n,l,t,e,o){var a=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t\taria-label="'+n.escapeExpression((a(t,"intlMessage")||l&&a(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.ADD_TO_FAVORITES"},data:o,loc:{start:{line:45,column:17},end:{line:45,column:67}}}))+'"\n'},36:function(n,l,t,e,o){return'tabindex="-1"'},38:function(n,l,t,e,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((r(t,"formatNumber")||l&&r(l,"formatNumber")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=(a=null!=(a=null!=l?r(l,"photo"):l)?r(a,"engagement"):a)?r(a,"faveCount"):a,{name:"formatNumber",hash:{},data:o,loc:{start:{line:52,column:39},end:{line:52,column:82}}}))},40:function(n,l,t,e,o){return" hidden"},42:function(n,l,t,e,o){var a,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression((r(t,"formatNumber")||l&&r(l,"formatNumber")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=(a=null!=(a=null!=l?r(l,"photo"):l)?r(a,"engagement"):a)?r(a,"commentCount"):a,{name:"formatNumber",hash:{},data:o,loc:{start:{line:60,column:42},end:{line:60,column:88}}}))},44:function(n,l,t,e,o){return'\t\t\t\t<span role="button" class="engagement-item curate" tabindex="0">\n\t\t\t\t\t<span class="engagement-icon">\n\t\t\t\t\t\t<svg class="icon icon-curate"><use xlink:href="#icon-curate"></use></svg>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n'},compiler:[8,">= 4.3.0"],main:function(n,l,t,e,o){var a,r,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,u=n.escapeExpression,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="photo-list-photo-interaction">\n\t<a class="overlay" href="'+u("function"==typeof(r=null!=(r=c(t,"photoPageUrl")||(null!=l?c(l,"photoPageUrl"):l))?r:s)?r.call(i,{name:"photoPageUrl",hash:{},data:o,loc:{start:{line:3,column:26},end:{line:3,column:42}}}):r)+'" tabindex="0" role="heading" aria-level="3" aria-label="'+(null!=(a=c(t,"if").call(i,null!=(a=null!=l?c(l,"photo"):l)?c(a,"title"):a,{name:"if",hash:{},fn:n.program(1,o,0),inverse:n.program(3,o,0),data:o,loc:{start:{line:3,column:99},end:{line:3,column:190}}}))?a:"")+(null!=(a=c(t,"if").call(i,null!=(a=null!=l?c(l,"photo"):l)?c(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(5,o,0),inverse:n.program(7,o,0),data:o,loc:{start:{line:3,column:190},end:{line:3,column:335}}}))?a:"")+'"></a>\n'+(null!=(a=c(t,"if").call(i,null!=l?c(l,"hasExtraFunctionality"):l,{name:"if",hash:{},fn:n.program(9,o,0),inverse:n.noop,data:o,loc:{start:{line:4,column:1},end:{line:16,column:8}}}))?a:"")+'\t<div class="interaction-bar" title="'+(null!=(a=c(t,"if").call(i,null!=(a=null!=l?c(l,"photo"):l)?c(a,"title"):a,{name:"if",hash:{},fn:n.program(1,o,0),inverse:n.program(3,o,0),data:o,loc:{start:{line:17,column:37},end:{line:17,column:128}}}))?a:"")+(null!=(a=c(t,"if").call(i,null!=(a=null!=l?c(l,"photo"):l)?c(a,"isOwner"):a,{name:"if",hash:{},fn:n.program(5,o,0),inverse:n.program(7,o,0),data:o,loc:{start:{line:17,column:128},end:{line:17,column:273}}}))?a:"")+'">\n\t\t<div class="text">\n'+(null!=(a=c(t,"if").call(i,null!=(a=null!=l?c(l,"photo"):l)?c(a,"title"):a,{name:"if",hash:{},fn:n.program(16,o,0),inverse:n.program(18,o,0),data:o,loc:{start:{line:19,column:3},end:{line:23,column:10}}}))?a:"")+(null!=(a=c(t,"if").call(i,null!=(a=null!=(a=null!=l?c(l,"photo"):l)?c(a,"owner"):a)?c(a,"displayname"):a,{name:"if",hash:{},fn:n.program(20,o,0),inverse:n.program(26,o,0),data:o,loc:{start:{line:24,column:3},end:{line:36,column:10}}}))?a:"")+'\t\t</div>\n\n\t\t<div class="engagement">\n\n\t\t\t<span role="button" class="engagement-item fave '+(null!=(a=c(t,"if").call(i,null!=(a=null!=(a=null!=l?c(l,"photo"):l)?c(a,"engagement"):a)?c(a,"isFaved"):a,{name:"if",hash:{},fn:n.program(28,o,0),inverse:n.noop,data:o,loc:{start:{line:41,column:51},end:{line:41,column:96}}}))?a:"")+(null!=(a=c(t,"if").call(i,null!=l?c(l,"canFave"):l,{name:"if",hash:{},fn:n.noop,inverse:n.program(30,o,0),data:o,loc:{start:{line:41,column:96},end:{line:41,column:131}}}))?a:"")+'" tabindex="0"\n'+(null!=(a=c(t,"if").call(i,null!=l?c(l,"isFaved"):l,{name:"if",hash:{},fn:n.program(32,o,0),inverse:n.program(34,o,0),data:o,loc:{start:{line:42,column:4},end:{line:46,column:11}}}))?a:"")+"\t\t\t\t"+(null!=(a=c(t,"unless").call(i,null!=l?c(l,"canFave"):l,{name:"unless",hash:{},fn:n.program(36,o,0),inverse:n.noop,data:o,loc:{start:{line:47,column:4},end:{line:47,column:47}}}))?a:"")+'>\n\t\t\t\t<span class="engagement-icon">\n\t\t\t\t\t<i class="animated-fave-star"></i>\n\t\t\t\t</span>\n\t\t\t\t<span class="engagement-count">\n\t\t\t\t\t'+(null!=(a=c(t,"if").call(i,null!=(a=null!=(a=null!=l?c(l,"photo"):l)?c(a,"engagement"):a)?c(a,"faveCount"):a,{name:"if",hash:{},fn:n.program(38,o,0),inverse:n.noop,data:o,loc:{start:{line:52,column:5},end:{line:52,column:89}}}))?a:"")+'\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t<a class="engagement-item comment" href="'+u("function"==typeof(r=null!=(r=c(t,"photoPageUrl")||(null!=l?c(l,"photoPageUrl"):l))?r:s)?r.call(i,{name:"photoPageUrl",hash:{},data:o,loc:{start:{line:55,column:44},end:{line:55,column:60}}}):r)+'#comments" aria-label="'+u((c(t,"intlMessage")||l&&c(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PLURAL_COMMENT"},data:o,loc:{start:{line:55,column:83},end:{line:55,column:143}}}))+'" tabindex="0">\n\t\t\t\t<span class="engagement-icon">\n\t\t\t\t\t<svg class="icon icon-comment_hollow"><use xlink:href="#icon-comment_hollow"></use></svg>\n\t\t\t\t</span>\n\t\t\t\t<span class="engagement-count'+(null!=(a=c(t,"if").call(i,null!=(a=null!=(a=null!=l?c(l,"photo"):l)?c(a,"engagement"):a)?c(a,"commentCount"):a,{name:"if",hash:{},fn:n.noop,inverse:n.program(40,o,0),data:o,loc:{start:{line:59,column:33},end:{line:59,column:84}}}))?a:"")+'">\n\t\t\t\t\t'+(null!=(a=c(t,"if").call(i,null!=(a=null!=(a=null!=l?c(l,"photo"):l)?c(a,"engagement"):a)?c(a,"commentCount"):a,{name:"if",hash:{},fn:n.program(42,o,0),inverse:n.noop,data:o,loc:{start:{line:60,column:5},end:{line:60,column:95}}}))?a:"")+"\n\t\t\t\t</span>\n\t\t\t</a>\n\n"+(null!=(a=c(t,"if").call(i,null!=l?c(l,"displayCurate"):l,{name:"if",hash:{},fn:n.program(44,o,0),inverse:n.noop,data:o,loc:{start:{line:64,column:3},end:{line:70,column:10}}}))?a:"")+"\t\t</div>\n\n\t</div>\n</div>\n"},useData:!0}),e={};n.Array.each([],function(l){var t=n.Template.get("hermes/"+l);t&&(e[l]=t)}),n.Template.register("hermes/photo-list-photo-interaction",function(l,o){return o=o||{},o.partials=o.partials?n.merge(e,o.partials):e,t(l,o)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-add-to-stuff-view",function(t,n){var l=t.Template.Handlebars.revive({1:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t<li role="button" class="tab-item album-tab selected" data-tab="album" tabindex="0">\n\t\t\t\t\t<span>'+t.escapeExpression((o(l,"intlMessage")||n&&o(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlName:"common.ALBUMS"},data:a,loc:{start:{line:7,column:11},end:{line:7,column:51}}}))+"</span>\n\t\t\t\t</li>\n"},3:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t<li role="button" class="tab-item gallery-tab" data-tab="gallery" tabindex="0">\n\t\t\t\t\t<span>'+t.escapeExpression((o(l,"intlMessage")||n&&o(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:a,loc:{start:{line:12,column:11},end:{line:12,column:54}}}))+"</span>\n\t\t\t\t</li>\n"},5:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t<li role="button" class="tab-item group-tab" data-tab="group" tabindex="0">\n\t\t\t\t\t<span>'+t.escapeExpression((o(l,"intlMessage")||n&&o(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlName:"common.GROUPS"},data:a,loc:{start:{line:17,column:11},end:{line:17,column:51}}}))+"</span>\n\t\t\t\t</li>\n"},7:function(t,n,l,e,a){var o=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,i=t.escapeExpression,r=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t<div class="tab-container selected" data-tab="album">\n\t\t\t\t'+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"album-selection-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:27,column:4},end:{line:27,column:35}}}))+"\n\t\t\t\t"+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"album-creation-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:28,column:4},end:{line:28,column:34}}}))+"\n\t\t\t</div>\n"},9:function(t,n,l,e,a){var o=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,i=t.escapeExpression,r=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t<div class="tab-container" data-tab="gallery">\n\t\t\t\t'+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"gallery-selection-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:34,column:4},end:{line:34,column:37}}}))+"\n\t\t\t\t"+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"gallery-creation-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:35,column:4},end:{line:35,column:36}}}))+"\n\t\t\t</div>\n"},11:function(t,n,l,e,a){var o,s=null!=n?n:t.nullContext||{},i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t<div class="tab-container" data-tab="group">\n\t\t\t\t'+t.escapeExpression((i(l,"outlet")||n&&i(n,"outlet")||t.hooks.helperMissing).call(s,null!=n?i(n,"group-selection-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:41,column:4},end:{line:41,column:35}}}))+"\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"inlineGroupCreation"):n,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:42,column:4},end:{line:44,column:11}}}))?o:"")+"\t\t\t</div>\n"},12:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"\t\t\t\t\t"+t.escapeExpression((o(l,"outlet")||n&&o(n,"outlet")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},null!=n?o(n,"group-creation-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:43,column:5},end:{line:43,column:35}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(t,n,l,e,a){var o,s=null!=n?n:t.nullContext||{},i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<div class="add-to-stuff-container" tabindex="-1">\n\t<div class="nav">\n\t\t<div class="list-label">'+t.escapeExpression((i(l,"intlMessage")||n&&i(n,"intlMessage")||t.hooks.helperMissing).call(s,{name:"intlMessage",hash:{intlName:"add-to-stuff.ADD_TO_LABEL"},data:a,loc:{start:{line:3,column:26},end:{line:3,column:78}}}))+"</div>\n\t\t<ul>\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showAlbums"):n,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:5,column:3},end:{line:9,column:10}}}))?o:"")+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGalleries"):n,{name:"if",hash:{},fn:t.program(3,a,0),inverse:t.noop,data:a,loc:{start:{line:10,column:3},end:{line:14,column:10}}}))?o:"")+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGroups"):n,{name:"if",hash:{},fn:t.program(5,a,0),inverse:t.noop,data:a,loc:{start:{line:15,column:3},end:{line:19,column:10}}}))?o:"")+'\t\t</ul>\n\t\t<svg class="close-x-button"><use xlink:href="#icon-close"></use></svg>\n\t</div>\n\t<div class="tab-content-container">\n\n'+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showAlbums"):n,{name:"if",hash:{},fn:t.program(7,a,0),inverse:t.noop,data:a,loc:{start:{line:25,column:2},end:{line:30,column:9}}}))?o:"")+"\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGalleries"):n,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:32,column:2},end:{line:37,column:9}}}))?o:"")+"\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGroups"):n,{name:"if",hash:{},fn:t.program(11,a,0),inverse:t.noop,data:a,loc:{start:{line:39,column:2},end:{line:46,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),e={};t.Array.each([],function(n){var l=t.Template.get("hermes/"+n);l&&(e[n]=l)}),t.Template.register("hermes/add-to-stuff-view",function(n,a){return a=a||{},a.partials=a.partials?t.merge(e,a.partials):e,l(n,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("add-to-stuff-view",function(e){e.namespace("Views")[this.name]=e.Base.create("add-to-stuff-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.params=e,this.params.showAlbums=!1!==this.params.showAlbums,this.params.showGalleries=!1!==this.params.showGalleries,this.params.showGroups=!1!==this.params.showGroups,this.params.initialTab=this.params.initialTab||"album",this.initialTab=this.params.initialTab,this.params.inlineGroupCreation=this.params.inlineGroupCreation||!1,this.params.inlineAlbumCreation=void 0===this.params.inlineAlbumCreation||this.params.inlineAlbumCreation,this.params.inlineGalleryCreation=void 0===this.params.inlineGalleryCreation||this.params.inlineGalleryCreation,this.params.inlineCreation={album:this.params.inlineAlbumCreation,gallery:this.params.inlineGalleryCreation,group:this.params.inlineGroupCreation},this.currentTabName="",this},subviewConfig:{"album-selection-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-selection-view"]},"gallery-selection-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-selection-view"]},"group-selection-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-selection-view"]},"album-creation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-creation-view","hidden"]},"gallery-creation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-creation-view","hidden"]},"group-creation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-creation-view","hidden"]}},buildContainer:function(){return this.setContainerWithTemplate("add-to-stuff-view",{showAlbums:this.params.showAlbums,showGalleries:this.params.showGalleries,showGroups:this.params.showGroups,inlineGroupCreation:this.params.inlineGroupCreation}),this},activate:function(){var e=this,t=this.get("container");return this.nav=t.one(".nav"),this.firstTab=t.one(".tab-item"),["album","gallery","group"].forEach(function(t){e.subviews[t+"-selection-view"].on("showCreate",function(){e.showCreate(t)}),e.setupCreationEvents(e.subviews[t+"-creation-view"])}),this.registerEventHandler(this.nav.one("ul").on(["click","key"],this.handleNavClick.bind(this),"down:13")),this.registerEventHandler(this.nav.one(".close-x-button").on("click",this.handleCloseClick.bind(this))),this.switchTabs(this.initialTab),this.registerEventHandler(t.on("keydown",this.handleKeyPress.bind(this))),this.registerEventHandler(t.delegate("focus",this.handleFocus.bind(this))),this},showCreate:function(e){this.params.inlineCreation[e]?(this.subviews[e+"-selection-view"].get("container").addClass("hidden"),this.subviews[e+"-creation-view"].get("container").removeClass("hidden"),this.nav.hide(),this.subviews[e+"-creation-view"].focusInitial(),this.fire("contentSizeChanged")):this.showCreateModal(e)},showCreateModal:function(t){var i=new e.CurationHelper(this.appContext);i.showCreationModal({viewName:t+"-creation-view",overlayClassList:"over-droparound-under-modal",customConfig:{photoId:this.params.photoId,inlineCreation:this.params.inlineCreation[t]}}),this.setupCreationEvents(i.creationView)},setupCreationEvents:function(e){var t=this,i=e.curationType;e.on("cancel",function(){t.params.inlineCreation[i]&&t.hideCreate(i)}),e.on("readyToClose",function(){t.params.inlineCreation[i]&&t.fire("readyToClose")}),e.on("created",function(e){t.params.inlineCreation[i]&&t.hideCreate(i),t.params.dismissOnCreate?t.fire("readyToClose"):e.curation&&t.subviews[i+"-selection-view"].reload()}),e.on("contentSizeChanged",function(e){t.fire("contentSizeChanged")})},hideCreate:function(e){this.subviews[e+"-selection-view"].get("container").removeClass("hidden"),this.subviews[e+"-creation-view"].get("container").addClass("hidden"),this.nav.show(),this.subviews[e+"-selection-view"].focusInitial(),this.fire("contentSizeChanged")},handleNavClick:function(e){var t;e.stopPropagation(),e.preventDefault(),e.target&&(t=e.target.ancestor("li",!0))&&this.switchTabs(t.get("dataset").tab)},switchTabs:function(e){var t=this,i=this.nav.one(".tab-item.selected"),n=this.nav.one(".tab-item[data-tab="+e+"]"),a=i?i.get("dataset").tab:null,r=this.get("container").one(".tab-content-container"),s=r.one(".tab-container[data-tab="+a+"]"),o=r.one(".tab-container[data-tab="+e+"]"),l=o.one(".stuff-selection-search");this.currentTabName=e,i&&(i.removeClass("selected"),s.removeClass("selected")),n.addClass("selected"),o.addClass("selected"),setTimeout(function(){t.fire("contentSizeChanged")},0),setTimeout(function(){l.focus()},10)},handleCloseClick:function(e){this.fire("readyToClose")},handleKeyPress:function(t){var i=t.keyCode,n=t.shiftKey,a=this.get("container").one(".tab-container.selected"),r=a.one(".done-button")||a.one(".create-button");9===i&&(n&&this.focusedItem===this.firstTab?(t.preventDefault(),r.focus()):n||this.focusedItem!==r||(t.preventDefault(),this.firstTab.focus())),e.fire("addToStuff:keyPressed",{curationType:this.currentTabName,evt:t})},handleFocus:function(e){this.focusedItem=e.target},onSubviewEvent:function(e,t){"readyToClose"===t[0].eventName&&this.fire("readyToClose")}},{ATTRS:{dismissOnCreate:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnCreateAlbum:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnCreateGallery:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnCreateGroup:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelect:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelectAlbum:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelectGallery:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelectGroup:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},inlineGroupCreation:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},useLargeLayout:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-add-to-stuff-view"],langBundles:["common","more-menu-view","add-to-stuff"]});YUI.add("album-creation-view",function(e,t){var i=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("album-creation-view",e.Views["stuff-creation-view"],[],{langBundles:this.details.langBundles,initializer:function(e){return e.heading=this.intlMessage({intlName:"add-to-stuff.CURATIONS_CREATE_A_NEW_ALBUM"}),e.placeholderTitle=this.intlMessage({intlName:"add-to-stuff.CURATIONS_ALBUM_NAME"}),e.placeholderDescription=this.intlMessage({intlName:"add-to-stuff.CURATIONS_DESCRIPTION_OPTIONAL"}),e.cancelText=this.intlMessage({intlName:"common.CANCEL"}),e.actionText=this.intlMessage({intlName:"global-nav.CREATE"}),this.photoId=e.photoId,this.dismissOnCreate=e.dismissOnCreateAlbum,this.curationType="album",this.photoIds=e.photoIds,this.titleError=this.intlMessage({intlName:"add-to-stuff.PLEASE_ENTER_ALBUM_NAME"}),this.createError=this.intlMessage({intlName:"add-to-stuff.COULDNT_SAVE_ALBUM"}),this.constructor.superclass.initializer.call(this,e)},activate:function(){var e=this.get("container");this.titleItemNode=e.one(".input-item.title-input-item"),this.titleErrorNode=e.one(".error-message.title-error"),this.createErrorNode=e.one(".error-message.create-error"),this.titleNode=e.one(".stuff-creation-title"),this.descriptionNode=e.one(".stuff-creation-description"),this.cancelButton=e.one(".button-cancel"),this.actionButton=e.one(".button-action"),this.closeButton=e.one(".close-x-button"),this.setupEvents(),this.constructor.superclass.activate.call(this,this.params)},setupEvents:function(){var e=this;this.get("container");this.registerEventHandler(this.titleNode.on("keyup",function(){e.titleNode.get("value")&&e.showTitleError(!1)})),this.registerEventHandler(this.cancelButton.on("click",function(){e.fire("cancel"),e.resetView()})),this.registerEventHandler(this.closeButton.on("click",function(){e.fire("readyToClose")})),this.registerEventHandler(this.actionButton.on("click",function(){e.createCuration()}))},createNewAndAddPhoto:function(){var t,o=this,s=!!this.photoIds,n=this.titleNode.get("value"),r=this.descriptionNode.get("value");return n?(t={photoID:s?this.photoIds[0]:this.photoId,title:n,description:r,isMultiplePhotos:s,numberOfPhotosSelected:o.params.numberOfPhotosSelected,numberOfVideosSelected:o.params.numberOfVideosSelected},this.appContext.getModelRegistry("set-models").then(function(e){return o.albumsModel=e,e.remote.create(t,o.appContext)}).then(function(e){return s&&o.photoIds.slice(1).length>0?o.addPhotos(e.getValue("id"),o.photoIds).then(function(){return e}):e}).then(function(e){return o.titleNode.set("value",""),o.descriptionNode.set("value",""),o.fire("created",{type:o.curationType,curation:e}),o.params.inlineCreation?o.resetView():o.fire("readyToClose"),e}).catch(function(e){throw i.error("Error handling photo addition after album creation",{err:e}),e})):(o.showTitleError(!0,o.titleError),e.Promise.reject({message:o.titleError}))},addPhotos:function(t,i){for(var o=this,s=[],n=[],r=0;r<i.length;r+=500)s.push(i.slice(r,r+500<i.length?r+500:i.length));return s.forEach(function(e,i){n.push(o.albumsModel.remote.addPhoto({photoID:e.join(","),isMultiplePhotos:!0,photosSelectedIds:o.params.photosSelectedIds,videosSelectedIds:o.params.videosSelectedIds,numberOfPhotosSelected:o.params.numberOfPhotosSelected,numberOfVideosSelected:o.params.numberOfVideosSelected,setID:t,updateItemCounts:0===i},this.appContext))}),e.Promise.all(n).then(function(e){return e&&e[0]?e[0].setModel:null})},focusInitial:function(){this.titleNode&&this.titleNode.focus()}})},"@VERSION@",{requires:["flickr-view","stuff-creation-view"],optional:["set-models"],langBundles:["more-menu-view","common","global-nav","add-to-stuff"]});YUI.add("gallery-creation-view",function(e,t){var i=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("gallery-creation-view",e.Views["stuff-creation-view"],[],{langBundles:this.details.langBundles,initializer:function(e){return e.heading=this.intlMessage({intlName:"add-to-stuff.CURATIONS_CREATE_A_NEW_GALLERY"}),e.placeholderTitle=this.intlMessage({intlName:"add-to-stuff.CURATIONS_GALLERY_NAME"}),e.placeholderDescription=this.intlMessage({intlName:"add-to-stuff.CURATIONS_DESCRIPTION_OPTIONAL"}),e.cancelText=this.intlMessage({intlName:"common.CANCEL"}),e.actionText=this.intlMessage({intlName:"global-nav.CREATE"}),this.photoId=e.photoId,this.dismissOnCreate=e.dismissOnCreateGallery,this.curationType="gallery",this.titleError=this.intlMessage({intlName:"add-to-stuff.PLEASE_ENTER_GALLERY_NAME"}),this.createError=this.intlMessage({intlName:"add-to-stuff.COULDNT_SAVE_GALLERY"}),this.constructor.superclass.initializer.call(this,e)},activate:function(){var e=this.get("container");this.titleItemNode=e.one(".input-item.title-input-item"),this.titleErrorNode=e.one(".error-message.title-error"),this.createErrorNode=e.one(".error-message.create-error"),this.titleNode=e.one(".stuff-creation-title"),this.descriptionNode=e.one(".stuff-creation-description"),this.actionButton=e.one(".button-action"),this.setupEvents(),this.constructor.superclass.activate.call(this,this.params)},setupEvents:function(){var e=this,t=this.get("container");this.cancelButton=t.one(".button-cancel"),this.actionButton=t.one(".button-action"),this.closeButton=t.one(".close-x-button"),this.registerEventHandler(this.titleNode.on("keyup",function(){e.titleNode.get("value")&&e.showTitleError(!1)})),this.registerEventHandler(this.cancelButton.on("click",function(){e.params.inlineCreation?(e.fire("cancel"),e.resetView()):e.fire("readyToClose")})),this.registerEventHandler(this.closeButton.on("click",function(){e.fire("readyToClose")})),this.registerEventHandler(this.actionButton.on("click",function(){e.createCuration()}))},createNewAndAddPhoto:function(){var t,r=this,o=this.titleNode.get("value"),n=this.descriptionNode.get("value");return e.rapidTracker.beacon(r.name,"galleryCreationViewCreateClick"),o?(r.showError(r.createErrorNode,!1),t={photoID:r.photoId,title:o,description:n},this.appContext.getModelRegistry("gallery-models").then(function(e){return e.remote.create(t,r.appContext)}).then(function(e){return r.photoId&&!e.getValue("primary")&&i.error("Photo cannot be added to galleries."),r.titleNode.set("value",""),r.descriptionNode.set("value",""),r.fire("created",{type:r.curationType,curation:e}),r.params.inlineCreation?r.resetView():r.fire("readyToClose"),e}).catch(function(e){throw i.error("Error handling photo addition after gallery creation",{err:e}),r.showError(r.createErrorNode,!0,r.createError),e})):(r.showTitleError(!0,r.titleError),e.Promise.reject({message:r.titleError}))},focusInitial:function(){this.titleNode&&this.titleNode.focus()}})},"@VERSION@",{requires:["flickr-view","stuff-creation-view"],langBundles:["more-menu-view","common","global-nav","add-to-stuff"]});YUI.add("hermes-template-group-creation-view",function(t,n){var e=t.Template.Handlebars.revive({1:function(t,n,e,a,l){var s=null!=n?n:t.nullContext||{},i=t.hooks.helperMissing,r=t.escapeExpression,o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"\t\t\t\t\t<span>"+r((o(e,"preventOrphans")||n&&o(n,"preventOrphans")||i).call(s,(o(e,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"groups.WE_SET_ONLY_SAFE"},data:l,loc:{start:{line:65,column:28},end:{line:65,column:76}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:65,column:11},end:{line:65,column:78}}}))+"</span>\n\t\t\t\t\t<span>"+r((o(e,"preventOrphans")||n&&o(n,"preventOrphans")||i).call(s,(o(e,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"groups.CAN_CHANGE_IN_ADMIN_SETTINGS"},data:l,loc:{start:{line:66,column:28},end:{line:66,column:88}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:66,column:11},end:{line:66,column:90}}}))+"</span>\n"},3:function(t,n,e,a,l){var s=null!=n?n:t.nullContext||{},i=t.hooks.helperMissing,r=t.escapeExpression,o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"\t\t\t\t\t<span>"+r((o(e,"preventOrphans")||n&&o(n,"preventOrphans")||i).call(s,(o(e,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"groups.WE_SET_SAFE_AND_MODERATE"},data:l,loc:{start:{line:69,column:28},end:{line:69,column:84}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:69,column:11},end:{line:69,column:86}}}))+"</span>\n\t\t\t\t\t<span>"+r((o(e,"preventOrphans")||n&&o(n,"preventOrphans")||i).call(s,(o(e,"intlMessage")||n&&o(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"groups.CAN_CHANGE_IN_ADMIN_SETTINGS"},data:l,loc:{start:{line:70,column:28},end:{line:70,column:88}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:70,column:11},end:{line:70,column:90}}}))+"</span>\n"},5:function(t,n,e,a,l){var s=null!=n?n:t.nullContext||{},i=t.hooks.helperMissing,r=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"\t\t\t\t\t<span>"+t.escapeExpression((r(e,"preventOrphans")||n&&r(n,"preventOrphans")||i).call(s,(r(e,"intlMessage")||n&&r(n,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"groups.WE_SET_18_PLUS"},data:l,loc:{start:{line:73,column:28},end:{line:73,column:74}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:73,column:11},end:{line:73,column:76}}}))+"</span>\n"},7:function(t,n,e,a,l){return' aria-checked="true" checked'},9:function(t,n,e,a,l){return" disabled"},11:function(t,n,e,a,l){return' aria-checked="false"'},compiler:[8,">= 4.3.0"],main:function(t,n,e,a,l){var s,i,r=null!=n?n:t.nullContext||{},o=t.hooks.helperMissing,c=t.escapeExpression,p=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<div class="group-creation-container">\n\t<header>\n\t\t<h1 class="title">'+c("function"==typeof(i=null!=(i=p(e,"heading")||(null!=n?p(n,"heading"):n))?i:o)?i.call(r,{name:"heading",hash:{},data:l,loc:{start:{line:3,column:20},end:{line:3,column:31}}}):i)+'</h1>\n\t\t<svg class="close-x-button"><use xlink:href="#icon-close"></use></svg>\n\t</header>\n\n\t<div class="group-creation-content-container">\n\t\t<div class="step-container" data-step-index="0">\n\t\t\t<div class="step-description">\n\t\t\t\t'+c((p(e,"preventOrphansHtml")||n&&p(n,"preventOrphansHtml")||o).call(r,(p(e,"intlHTMLMessage")||n&&p(n,"intlHTMLMessage")||o).call(r,{name:"intlHTMLMessage",hash:{help_url:null!=(s=null!=n?p(n,"urls"):n)?p(s,"help"):s,group_guidelines_url:null!=(s=null!=n?p(n,"urls"):n)?p(s,"groupGuidelines"):s,intlName:"groups.GROUP_CREATION_INTRO"},data:l,loc:{start:{line:10,column:25},end:{line:10,column:142}}}),{name:"preventOrphansHtml",hash:{},data:l,loc:{start:{line:10,column:4},end:{line:10,column:144}}}))+'\n\t\t\t</div>\n\t\t\t<div class="group-options group-privacy">\n\t\t\t\t<div class="radio-container public-group radio large">\n\t\t\t\t\t<input type="radio" id="public-group-radio" class="toggle-input" name="membership" aria-checked="true" checked/>\n\t\t\t\t\t<label for="public-group-radio" tabindex="0">\n\t\t\t\t\t\t<div class="check-indicator"></div>\n\t\t\t\t\t\t<span class="label-text">'+c((p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.PUBLIC_GROUP"},data:l,loc:{start:{line:17,column:31},end:{line:17,column:77}}}))+'</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class="radio-sub-text">\n\t\t\t\t\t\t'+c((p(e,"preventOrphans")||n&&p(n,"preventOrphans")||o).call(r,(p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.PUBLIC_GROUP_DESC_1"},data:l,loc:{start:{line:20,column:23},end:{line:20,column:74}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:20,column:6},end:{line:20,column:76}}}))+'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="radio-container invite-only-group radio large">\n\t\t\t\t\t<input type="radio" id="invite-only-group-radio" class="toggle-input" name="membership" aria-checked="false"/>\n\t\t\t\t\t<label for="invite-only-group-radio" tabindex="0">\n\t\t\t\t\t\t<div class="check-indicator"></div>\n\t\t\t\t\t\t<span class="label-text">'+c((p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.INVITE_ONLY_GROUP"},data:l,loc:{start:{line:28,column:31},end:{line:28,column:82}}}))+'</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class="radio-sub-text">\n\t\t\t\t\t\t<span>'+c((p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.INVITE_ONLY_GROUP_DESC_1"},data:l,loc:{start:{line:31,column:12},end:{line:31,column:70}}}))+"</span>\n\t\t\t\t\t\t<span>"+c((p(e,"preventOrphans")||n&&p(n,"preventOrphans")||o).call(r,(p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.INVITE_ONLY_GROUP_DESC_3"},data:l,loc:{start:{line:32,column:29},end:{line:32,column:85}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:32,column:12},end:{line:32,column:87}}}))+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="private-group-option-container hidden">\n\t\t\t\t\t<div class="checkbox-container private-group radio switch">\n\t\t\t\t\t\t<input id="private-group" class="toggle-input" type="checkbox" aria-checked="false">\n\t\t\t\t\t\t<label for="private-group" tabindex="0">\n\t\t\t\t\t\t\t<span class="label-text">'+c((p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.MAKE_GROUP_PRIVATE"},data:l,loc:{start:{line:39,column:32},end:{line:39,column:84}}}))+'</span>\n\t\t\t\t\t\t\t<div class="check-indicator square" role="checkbox"></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class="checkbox-sub-text">\n\t\t\t\t\t\t\t<span class="desc-1">'+c((p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.PRIVATE_GROUP_DESC_1"},data:l,loc:{start:{line:43,column:28},end:{line:43,column:82}}}))+'</span>\n\t\t\t\t\t\t\t<span class="desc-2">'+c((p(e,"preventOrphansHtml")||n&&p(n,"preventOrphansHtml")||o).call(r,(p(e,"intlHTMLMessage")||n&&p(n,"intlHTMLMessage")||o).call(r,{name:"intlHTMLMessage",hash:{intlName:"groups.PRIVATE_GROUP_DESC_2"},data:l,loc:{start:{line:44,column:49},end:{line:44,column:105}}}),{name:"preventOrphansHtml",hash:{},data:l,loc:{start:{line:44,column:28},end:{line:44,column:107}}}))+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="step-container hidden" data-step-index="1">\n\t\t\t<div class="step-description">\n\t\t\t\t'+c((p(e,"preventOrphans")||n&&p(n,"preventOrphans")||o).call(r,(p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{lang:null!=n?p(n,"lang"):n,intlName:"groups.GROUP_NAME_DESC_INSTRUCTION"},data:l,loc:{start:{line:53,column:21},end:{line:53,column:90}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:53,column:4},end:{line:53,column:92}}}))+'\n\t\t\t</div>\n\t\t\t<div class="group-options group-details">\n\t\t\t\t<input class="input-field group-name" type="text" placeholder="'+c((p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.GROUP_NAME_PLACEHOLDER"},data:l,loc:{start:{line:56,column:67},end:{line:56,column:123}}}))+'"/>\n\t\t\t\t<div class="error-message title-error hidden"></div>\n\t\t\t\t<textarea class="input-field group-description" placeholder="'+c((p(e,"preventOrphans")||n&&p(n,"preventOrphans")||o).call(r,(p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.GROUP_DESC_PLACEHOLDER"},data:l,loc:{start:{line:58,column:82},end:{line:58,column:136}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:58,column:65},end:{line:58,column:138}}}))+'"></textarea>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="step-container hidden" data-step-index="2">\n\t\t\t<div class="step-description">\n'+(null!=(s=(p(e,"ifCond")||n&&p(n,"ifCond")||o).call(r,null!=n?p(n,"safetyLevel"):n,"===","0",{name:"ifCond",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l,loc:{start:{line:64,column:4},end:{line:67,column:15}}}))?s:"")+(null!=(s=(p(e,"ifCond")||n&&p(n,"ifCond")||o).call(r,null!=n?p(n,"safetyLevel"):n,"===","1",{name:"ifCond",hash:{},fn:t.program(3,l,0),inverse:t.noop,data:l,loc:{start:{line:68,column:4},end:{line:71,column:15}}}))?s:"")+(null!=(s=(p(e,"ifCond")||n&&p(n,"ifCond")||o).call(r,null!=n?p(n,"safetyLevel"):n,"===","2",{name:"ifCond",hash:{},fn:t.program(5,l,0),inverse:t.noop,data:l,loc:{start:{line:72,column:4},end:{line:74,column:15}}}))?s:"")+'\t\t\t</div>\n\t\t\t<div class="group-options group-age">\n\t\t\t\t<div class="radio-container all-age-group radio large">\n\t\t\t\t\t<input type="radio" id="all-age-group" class="toggle-input" name="age"\n\t\t\t\t\t\t'+(null!=(s=(p(e,"ifCond")||n&&p(n,"ifCond")||o).call(r,null!=n?p(n,"safetyLevel"):n,"!==","2",{name:"ifCond",hash:{},fn:t.program(7,l,0),inverse:t.program(9,l,0),data:l,loc:{start:{line:79,column:6},end:{line:79,column:95}}}))?s:"")+'/>\n\t\t\t\t\t<label for="all-age-group" tabindex="0">\n\t\t\t\t\t\t<div class="check-indicator"></div>\n\t\t\t\t\t\t<span class="label-text">'+c((p(e,"preventOrphans")||n&&p(n,"preventOrphans")||o).call(r,(p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.GOOD_FOR_ALL_AGES"},data:l,loc:{start:{line:82,column:48},end:{line:82,column:97}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:82,column:31},end:{line:82,column:99}}}))+'</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class="radio-container adult-group radio large">\n\t\t\t\t\t<input type="radio" id="adult-group" class="toggle-input" name="age" '+(null!=(s=(p(e,"ifCond")||n&&p(n,"ifCond")||o).call(r,null!=n?p(n,"safetyLevel"):n,"===","2",{name:"ifCond",hash:{},fn:t.program(7,l,0),inverse:t.program(11,l,0),data:l,loc:{start:{line:86,column:74},end:{line:86,column:175}}}))?s:"")+'/>\n\t\t\t\t\t<label for="adult-group" tabindex="0">\n\t\t\t\t\t\t<div class="check-indicator"></div>\n\t\t\t\t\t\t<span class="label-text">'+c((p(e,"preventOrphans")||n&&p(n,"preventOrphans")||o).call(r,(p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.GROUP_IS_18_PLUS"},data:l,loc:{start:{line:89,column:48},end:{line:89,column:96}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:89,column:31},end:{line:89,column:98}}}))+'</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class="radio-sub-text">\n\t\t\t\t\t\t<span>'+c((p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"groups.FOR_ADULT_ONLY_GROUPS"},data:l,loc:{start:{line:92,column:12},end:{line:92,column:67}}}))+"</span>\n\t\t\t\t\t\t<a href="+c(t.lambda(null!=(s=null!=n?p(n,"urls"):n)?p(s,"age"):s,n))+' target="_blank">'+c((p(e,"preventOrphans")||n&&p(n,"preventOrphans")||o).call(r,(p(e,"intlMessage")||n&&p(n,"intlMessage")||o).call(r,{name:"intlMessage",hash:{intlName:"common.LEARN_MORE"},data:l,loc:{start:{line:93,column:60},end:{line:93,column:102}}}),{name:"preventOrphans",hash:{},data:l,loc:{start:{line:93,column:43},end:{line:93,column:104}}}))+'</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="terms-of-service">\n\t\t\t\t'+c((p(e,"preventOrphansHtml")||n&&p(n,"preventOrphansHtml")||o).call(r,(p(e,"intlHTMLMessage")||n&&p(n,"intlHTMLMessage")||o).call(r,{name:"intlHTMLMessage",hash:{comm_guidelines_url:null!=(s=null!=n?p(n,"urls"):n)?p(s,"commGuidelines"):s,terms_of_service_url:null!=(s=null!=n?p(n,"urls"):n)?p(s,"termsOfService"):s,intlName:"groups.GROUP_TERMINATION_WARNING"},data:l,loc:{start:{line:98,column:25},end:{line:98,column:167}}}),{name:"preventOrphansHtml",hash:{},data:l,loc:{start:{line:98,column:4},end:{line:98,column:169}}}))+'\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="action-container">\n\t\t<div class="error-message create-error hidden"></div>\n\t\t<div class="buttons">\n\t\t\t<button class="mini alt button-cancel">'+c("function"==typeof(i=null!=(i=p(e,"cancelText")||(null!=n?p(n,"cancelText"):n))?i:o)?i.call(r,{name:"cancelText",hash:{},data:l,loc:{start:{line:106,column:42},end:{line:106,column:56}}}):i)+'</button>\n\t\t\t<button class="mini action button-action">'+c("function"==typeof(i=null!=(i=p(e,"createText")||(null!=n?p(n,"createText"):n))?i:o)?i.call(r,{name:"createText",hash:{},data:l,loc:{start:{line:107,column:45},end:{line:107,column:59}}}):i)+"</button>\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),a={};t.Array.each([],function(n){var e=t.Template.get("hermes/"+n);e&&(a[n]=e)}),t.Template.register("hermes/group-creation-view",function(n,l){return l=l||{},l.partials=l.partials?t.merge(a,l.partials):a,e(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("group-creation-view",function(t,e){var i=require("hermes-core/flog")(e),o={4:{default:"add-to-stuff.ALREADY_GROUP_WITH_NAME"}};t.namespace("Views")[this.name]=t.Base.create("group-creation-view",t.Views["stuff-creation-view"],[],{langBundles:this.details.langBundles,initializer:function(t){var e=[{title:"<span>"+this.intlMessage({intlName:"add-to-stuff.CURATIONS_CREATE_A_NEW_GROUP"})+"</span>",cancelText:this.intlMessage({intlName:"common.CANCEL"}),actionText:this.intlMessage({intlName:"stats.NEXT"})},{title:this.intlMessage({intlName:"add-to-stuff.ABOUT_YOUR_GROUP"}),cancelText:this.intlMessage({intlName:"stats.PREVIOUS"}),actionText:this.intlMessage({intlName:"stats.NEXT"})},{title:this.intlMessage({intlName:"groups.GROUP_SAFETY_LEVEL"}),cancelText:this.intlMessage({intlName:"stats.PREVIOUS"}),actionText:this.intlMessage({intlName:"groups.CREATE_GROUP"})}];return this.labelList=e,this.curationType="group",this.titleError=this.intlMessage({intlName:"add-to-stuff.PLEASE_ENTER_GROUP_NAME"}),this.createError=this.intlMessage({intlName:"add-to-stuff.COULDNT_SAVE_GROUP"}),this.photoId=t.photoId,this.groupOptions={ageRestriction:"0",privacy:"3",safety:"0"},this.constructor.superclass.initializer.call(this,t)},loadState:function(){var e=this;return this.photoId?this.appContext.getModel("photo-models",this.photoId).then(function(t){var i=t.getValue("safetyLevel");e.photoModel=t,e.groupOptions.safety=i?i.toString():"0"}):t.Promise.resolve()},buildContainer:function(){return this.activeStep=0,this.setContainerWithTemplate("group-creation-view",{heading:this.labelList[0].title,cancelText:this.labelList[0].cancelButton,actionText:this.labelList[0].actionButton,lang:this.appContext.lang,urls:{groupGuidelines:"/groups_guidelines.gne",help:"https://help.flickr.com/en_us/search?q=groups",age:"https://help.flickr.com/en_us/flickr-group-administration-options-SyQAnXoyQ",termsOfService:"/atos/pro",commGuidelines:"/help/guidelines"},safetyLevel:this.groupOptions.safety}),this},activate:function(){var t=this,e=this.get("container");this.headTitleNode=e.one(".title"),this.actionContainer=e.one(".action-container"),this.cancelButton=e.one(".button-cancel"),this.actionButton=e.one(".button-action"),this.closeButton=e.one(".close-x-button"),this.titleNode=e.one(".group-name"),this.descriptionNode=e.one(".group-description"),this.titleErrorNode=e.one(".error-message.title-error"),this.createErrorNode=e.one(".error-message.create-error"),this.privateGroupInput=e.one("#private-group"),this.ageRadioContainer=e.one(".group-age"),this.privacyRadioContainer=e.one(".group-privacy"),this.privateGroupOptionContainer=e.one(".private-group-option-container"),this.headTitleNode.set("innerHTML",this.labelList[0].title),this.cancelButton.set("text",this.labelList[0].cancelText),this.actionButton.set("text",this.labelList[0].actionText),this.registerEventHandler(this.privacyRadioContainer.on("change",this.handlePrivacyRadioChange.bind(this))),this.registerEventHandler(this.ageRadioContainer.on("change",this.handleAgeRadioChange.bind(this))),this.registerEventHandler(this.cancelButton.on("click",this.handleCancel.bind(this))),this.registerEventHandler(this.actionButton.on("click",this.handleAction.bind(this))),this.registerEventHandler(this.closeButton.on("click",function(){t.fire("readyToClose")}.bind(this))),this.registerEventHandler(this.titleNode.on("keyup",function(){this.titleNode.get("value")&&this.showError(this.titleErrorNode,!1)}.bind(this))),this.registerEventHandler(this.privacyRadioContainer.on("keydown",this.handlePrivacyKeyPress.bind(this))),this.registerEventHandler(this.ageRadioContainer.on("keydown",this.handleAgeKeyPress.bind(this))),this.constructor.superclass.activate.call(this,this.params)},handleCancel:function(){this.activeStep>0?this.goToStep(this.activeStep-1):this.params.inlineCreation?(this.fire("cancel"),this.resetView()):this.fire("readyToClose")},handleAction:function(){0===this.activeStep?this.goToStep(this.activeStep+1):1===this.activeStep?this.titleNode.get("value")?this.goToStep(this.activeStep+1):this.showError(this.titleErrorNode,!0,this.titleError):this.titleNode.get("value")?(this.showError(this.createErrorNode,!1),this.createCuration().then(function(t){this.fire("created",{type:this.curationType,curation:t}),this.params.inlineCreation?this.resetView():this.fire("readyToClose")}.bind(this)).catch(function(t){var e=t.code;4===e&&o.hasOwnProperty(e)?(this.goToStep(1),this.showError(this.titleErrorNode,!0,this.intlMessage({intlName:o[e].default}))):this.showError(this.createErrorNode,!0,this.createError)}.bind(this))):(this.goToStep(1),this.showError(this.titleErrorNode,!0,this.titleError))},handlePrivacyKeyPress:function(t){var e=t.keyCode,i=t.target.ancestor(".radio",!0).one(".toggle-input"),o=i.get("type");13===e&&("radio"===o?i.get("checked")||(i.set("checked",!0),this.handlePrivacyRadioChange(t)):(i.set("checked",!i.get("checked")),this.handlePrivacyRadioChange(t)))},handleAgeKeyPress:function(t){var e=t.keyCode,i=t.target.ancestor(".radio",!0).one(".toggle-input"),o=i.hasAttribute("disabled");13!==e||i.get("checked")||o||(i.set("checked",!0),this.handleAgeRadioChange(t))},handlePrivacyRadioChange:function(t){var e=t.target.ancestor(".radio",!0);e.hasClass("public-group")?(this.privateGroupOptionContainer.addClass("hidden"),this.privateGroupInput.set("checked",!1),this.groupOptions.privacy="3"):e.hasClass("invite-only-group")?(this.privateGroupOptionContainer.removeClass("hidden"),this.groupOptions.privacy="2"):e.hasClass("private-group")&&(e.one(".toggle-input").get("checked")?this.groupOptions.privacy="1":this.groupOptions.privacy="2"),this.fire("contentSizeChanged")},handleAgeRadioChange:function(t){var e=t.target.get("id");"all-age-group"===e?this.groupOptions.ageRestriction="0":"adult-group"===e&&(this.groupOptions.ageRestriction="1")},goToStep:function(t){var e=this.get("container"),i=e.one('.step-container[data-step-index="'+this.activeStep+'"]'),o=e.one('.step-container[data-step-index="'+t+'"]');clearTimeout(this.goToStepTimeout),o.removeClass("hiding-left"),o.removeClass("hiding-right"),i.removeClass("showing"),i.removeClass("showing-left"),i.removeClass("showing-right"),o.removeClass("hidden"),o.addClass("showing"),t>this.activeStep?(i.addClass("hiding-left"),setTimeout(function(){o.addClass("showing-left")},0)):(i.addClass("hiding-right"),setTimeout(function(){o.addClass("showing-right")},0)),this.goToStepTimeout=setTimeout(function(){i.removeClass("hiding-left"),i.removeClass("hiding-right"),o.removeClass("showing"),o.removeClass("showing-left"),o.removeClass("showing-right"),i.addClass("hidden")},300),this.setStepValues(t),1===this.activeStep&&this.titleNode.focus(),this.fire("contentSizeChanged")},setStepValues:function(t){var e=this;this.headTitleNode.addClass("changing"),this.actionContainer.addClass("changing"),e.setStepValuesTimeout=setTimeout(function(){e.headTitleNode.set("innerHTML",e.labelList[t].title),e.cancelButton.set("text",e.labelList[t].cancelText),e.actionButton.set("text",e.labelList[t].actionText)},300),this.setStepValuesTimeout=setTimeout(function(){e.headTitleNode.removeClass("changing"),e.actionContainer.removeClass("changing"),e.cancelButton.set("text",e.labelList[t].cancelText),e.actionButton.set("text",e.labelList[t].actionText)},600),this.activeStep=t},createNewAndAddPhoto:function(){var e,i=this,o=this.titleNode.get("value"),s=this.descriptionNode.get("value");return e={name:o,description:s,userId:this.appContext.getViewer().nsid,privacyLevel:this.groupOptions.privacy,ageRestriction:this.groupOptions.ageRestriction,safetyLevel:this.groupOptions.safety},this.appContext.getModelRegistry("group-info-models").then(function(t){return i.groupInfoModelRegistry=t,t.remote.create(e,i.appContext)}).then(function(e){return i.photoId?i.addPhoto(e.id,i.photoId).then(function(){return e}):t.Promise.resolve(e)}).catch(function(t){throw t})},addPhoto:function(t,e){var o=this;return this.appContext.getModel("group-pool-models",t).then(function(t){return o.photoModel.getValue("isOwner")?o.addToGroup(t,e):o.inviteToGroup(t,e)}).catch(function(t){i.error("Error adding photo after group creation",{err:t})})},addToGroup:function(t,e){var o=t.getValue("id");return t.addPhotoRemote(e).catch(function(s){if(6===s.code)return this.pendingGroupRegistry.addOrUpdate({id:[e,o].join("-"),photoId:e,groupId:o}),t;throw i.error("Error adding photo to group",{err:s}),s})},inviteToGroup:function(t,e){t.getValue("id");return t.invitePhotoRemote(e).catch(function(e){if(6===e.code)return t;throw i.error("Error inviting photo to group",{err:e}),e})},showError:function(e,i,o){o&&e.set("text",t.StringHelper.preventOrphans(o)),i?e.removeClass("hidden"):e.addClass("hidden")},resetView:function(){this.buildContainer(),this.activate()}})},"@VERSION@",{requires:["flickr-view","stuff-creation-view","hermes-template-group-creation-view","string-helper"],langBundles:["common","global-nav","stats","groups","add-to-stuff"]});YUI.add("curation-helper",function(e,o){require("hermes-core/flog")(o),e.mix({langBundles:["prints"]},e.Localizable);e.CurationHelper=function(o,i){var s=this;return this.showAddToCuration=function(i){var t,r,a=i.photoId,n=i.customConfig,u=i.anchorNode,l=void 0===i.useViewportType||i.useViewportType,w=i.containerType,d=void 0===i.showAlbums||i.showAlbums,c=void 0!==i.showGalleries&&i.showGalleries,h=void 0===i.showGroups||i.showGroups,p=i.initialTab,m={};return p||(p=d?"album":"gallery"),t=n||{photoId:a,initialTab:p,showAlbums:d,showGalleries:c,showGroups:h,inlineGroupCreation:!1,dismissOnSelect:!0,dismissOnCreate:!0},m={useViewportType:l,containerType:w,configs:{droparound:{preferTop:!0,width:400,anchorElement:u,keyboardAnchorElement:u}}},"droparound"===(r=new e.ModalDroparoundHelper(o,m)).params.containerType?this.curateView=new e.Views["add-to-stuff-view"](t):(t.inlineGroupCreation=!0,t.useLargeLayout=!0,t.dismissOnSelect=!1,t.dismissOnCreate=!1,this.curateView=new e.Views["add-to-stuff-view"](t)),m.configs.common.subview=this.curateView,r.setParams(m),this.curateWrapperView=r.show(),r.on("close",function(e){s.fire("curateDroparoundClosed")}),this.curateWrapperView},this.showCreationModal=function(i){var s=i.viewName,t=i.customConfig,r=i.overlayClassList,a={appContext:o};a=Object.assign(a,t),this.creationView=new e.Views[s](a),this.creationModal=new e.Views.FluidModal({appContext:o,subview:this.creationView,dismissOnOverlayClick:!0,showHeader:!1,showFooter:!1,showButtons:!1,showCancelButton:!1,showActionButton:!1,showCancelX:!1,contentPadding:0,overlayClassList:r}),this.creationModal.show()},this},e.augment(e.CurationHelper,e.EventTarget)},"@VERSION@",{requires:["event-custom","add-to-stuff-view","album-creation-view","gallery-creation-view","group-creation-view","modal-droparound-helper"]});